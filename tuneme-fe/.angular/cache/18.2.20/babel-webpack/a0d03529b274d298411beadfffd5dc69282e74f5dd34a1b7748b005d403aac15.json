{"ast":null,"code":"import { RouterLink, RouterLinkActive } from '@angular/router';\nimport { NAV_ITEMS } from '../../shared/nav-items';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"../../services/user-profile.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = () => ({\n  exact: true\n});\nfunction HeaderComponent_ng_container_4_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", item_r1.route)(\"routerLinkActiveOptions\", i0.ɵɵpureFunction0(3, _c0));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(item_r1.label);\n  }\n}\nfunction HeaderComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, HeaderComponent_ng_container_4_a_1_Template, 2, 4, \"a\", 10);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.shouldShowMenuItem(item_r1));\n  }\n}\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(authService, userProfileService) {\n      this.authService = authService;\n      this.userProfileService = userProfileService;\n      this.navItems = NAV_ITEMS;\n      this.topLevelNavItems = []; // New property for filtered top-level items\n      this.currentUserRole = '';\n      this.selectedLanguage = '';\n    }\n    ngOnInit() {\n      this.currentUserRole = this.authService.getUserRole();\n      const profile = this.userProfileService.getProfileData();\n      if (profile && profile['Current-User-Language']) {\n        this.selectedLanguage = profile['Current-User-Language'];\n      }\n      console.log('currentUserProfileData from localStorage:', profile);\n      // Filter NAV_ITEMS for top-level display\n      const topLevelLabels = ['Home', 'My Knowledge', 'My Health', 'Find A Service', 'My Favourites'];\n      this.topLevelNavItems = this.navItems.filter(item => topLevelLabels.includes(item.label));\n    }\n    onLanguageChange(event) {\n      const language = event.target.value;\n      const profile = this.userProfileService.getProfileData() || {\n        countryOffice: 'Botswana',\n        'Current-User-Language': 'en'\n      };\n      profile['Current-User-Language'] = language;\n      this.userProfileService.saveProfileData(profile);\n      this.selectedLanguage = language;\n    }\n    shouldShowMenuItem(item) {\n      if (!item.roles) {\n        return true; // Show if no specific roles are defined\n      }\n      return item.roles.includes(this.currentUserRole);\n    }\n    static {\n      this.ɵfac = function HeaderComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || HeaderComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.UserProfileService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HeaderComponent,\n        selectors: [[\"app-header\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 14,\n        vars: 2,\n        consts: [[1, \"header\"], [1, \"header-left\"], [\"src\", \"assets/logo.png\", \"alt\", \"Logo\", 1, \"logo\"], [1, \"header-nav\"], [4, \"ngFor\", \"ngForOf\"], [1, \"header-right\"], [\"routerLink\", \"/home\", 1, \"download-btn\"], [1, \"user-profile\"], [1, \"country-dropdown\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"en\"], [\"routerLinkActive\", \"active-link\", \"class\", \"nav-link\", 3, \"routerLink\", \"routerLinkActiveOptions\", 4, \"ngIf\"], [\"routerLinkActive\", \"active-link\", 1, \"nav-link\", 3, \"routerLink\", \"routerLinkActiveOptions\"]],\n        template: function HeaderComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"header\", 0)(1, \"div\", 1);\n            i0.ɵɵelement(2, \"img\", 2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"nav\", 3);\n            i0.ɵɵtemplate(4, HeaderComponent_ng_container_4_Template, 2, 1, \"ng-container\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 5)(6, \"a\", 6);\n            i0.ɵɵtext(7, \"Download\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 7)(9, \"span\");\n            i0.ɵɵtext(10, \"Language\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"select\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function HeaderComponent_Template_select_ngModelChange_11_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.selectedLanguage, $event) || (ctx.selectedLanguage = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function HeaderComponent_Template_select_change_11_listener($event) {\n              return ctx.onLanguageChange($event);\n            });\n            i0.ɵɵelementStart(12, \"option\", 9);\n            i0.ɵɵtext(13, \"en\");\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngForOf\", ctx.topLevelNavItems);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedLanguage);\n          }\n        },\n        dependencies: [RouterLink, RouterLinkActive, CommonModule, i3.NgForOf, i3.NgIf, FormsModule, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n        styles: [\".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 30px;background-color:var(--background-white);border-bottom:none;box-shadow:0 2px 10px #0000000d;position:fixed;width:100%;top:0;left:0;z-index:1000}.header-left[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:50px}.header-nav[_ngcontent-%COMP%]{display:flex;gap:30px}.nav-link[_ngcontent-%COMP%]{display:block;padding:20px 20px 17px;text-transform:uppercase;letter-spacing:.02em;outline:none;box-sizing:content-box;text-decoration:none;position:relative;transition:color .3s ease}.nav-link[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;width:0;height:2px;bottom:0;left:0;background-color:var(--primary-color);transition:width .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.nav-link[_ngcontent-%COMP%]:hover:after{width:100%}.nav-link.active-link[_ngcontent-%COMP%]{color:var(--primary-color)!important}.nav-link.active-link[_ngcontent-%COMP%]:after{width:100%}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:25px}.download-btn[_ngcontent-%COMP%]{background-color:#ed8b00;color:#fff;border:none;padding:10px 25px;border-radius:25px;cursor:pointer;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;box-shadow:0 4px 10px #0000001a}.download-btn[_ngcontent-%COMP%]:hover{background-color:#d67c00;transform:translateY(-2px);box-shadow:0 6px 12px #00000026}.download-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 5px #0000001a}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:var(--text-color-light)}.country-dropdown[_ngcontent-%COMP%]{padding:8px 12px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--background-white);cursor:pointer;color:var(--text-color-dark);transition:border-color .2s ease,box-shadow .2s ease}.country-dropdown[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 .2rem rgba(var(--primary-color),.25)}@media (max-width: 992px){.header-nav[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%]{gap:15px}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;padding:10px 20px}.header-left[_ngcontent-%COMP%], .header-right[_ngcontent-%COMP%], .header-nav[_ngcontent-%COMP%]{width:100%;justify-content:center;margin-bottom:10px}.download-btn[_ngcontent-%COMP%]{margin-top:10px}}\"]\n      });\n    }\n  }\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}